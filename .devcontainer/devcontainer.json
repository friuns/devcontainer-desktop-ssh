{
    "name": "Dev Container with Desktop and SSH",
    "image": "mcr.microsoft.com/devcontainers/universal:2",
    "features": {
        "ghcr.io/devcontainers/features/desktop-lite:1": {
            "password": "vscode",
            "webPort": "6080",
            "vncPort": "5901"
        },
        "ghcr.io/devcontainers/features/sshd:1": {
            "version": "latest"
        },
        "ghcr.io/devcontainers/features/common-utils:2": {
            "installZsh": true,
            "installOhMyZsh": true,
            "upgradePackages": true,
            "username": "vscode"
        },
        "ghcr.io/devcontainers/features/git:1": {
            "version": "latest",
            "ppa": false
        },
        "ghcr.io/devcontainers/features/github-cli:1": {
            "version": "latest"
        }
    },
    "forwardPorts": [6080, 5901, 2222],
    "portsAttributes": {
        "6080": {
            "label": "Desktop (noVNC)",
            "onAutoForward": "notify"
        },
        "5901": {
            "label": "VNC",
            "onAutoForward": "notify"
        },
        "2222": {
            "label": "SSH",
            "onAutoForward": "notify"
        }
    },
    "postCreateCommand": [
        "echo 'Installing common desktop applications...'",
        "apt-get update && apt-get install -y --no-install-recommends xfce4-terminal mousepad thunar firefox x11-apps xterm gedit vim-gtk3 leafpad",
        "echo 'Dev container with Desktop and SSH is ready!'"
    ],
    "remoteUser": "vscode"
}
